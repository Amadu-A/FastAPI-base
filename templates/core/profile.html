<!-- /base_app/templates/core/profile.html -->
{% extends "core/base.html" %}
{% block content %}
<h1>Профиль</h1>

<div class="card">
  <p><strong>User:</strong> {{ user.email }} | id={{ user.id }}</p>
  <p><strong>Верификация e-mail:</strong>
    {% if user.activation_key %}
      <span class="warn">не подтверждён</span>
    {% else %}
      <span class="ok">подтверждён</span>
    {% endif %}
  </p>
</div>

<form class="form profile-form" method="post"
      action="{{ request.url_for('profile_post_html') }}"
      enctype="multipart/form-data">

  <div class="form-row">
    <label>Nickname</label>
    <input class="input-stick-right" type="text" name="nickname" value="{{ profile.nickname or '' }}">
  </div>

  <div class="form-row">
    <label>Avatar</label>
    <div class="avatar-cell">
      {% if profile.avatar %}
        <div class="avatar-preview">
          <img src="{{ url_for('static', path=profile.avatar) }}" alt="avatar">
        </div>
      {% endif %}
      <input type="file" name="avatar" accept="image/*">
    </div>
  </div>

  <div class="form-row">
    <label>Имя</label>
    <input class="input-stick-right" type="text" name="first_name" value="{{ profile.first_name or '' }}">
  </div>

  <div class="form-row">
    <label>Фамилия</label>
    <input class="input-stick-right" type="text" name="second_name" value="{{ profile.second_name or '' }}">
  </div>

  <div class="form-row">
    <label>Телефон</label>
    <input class="input-stick-right" type="text" name="phone" value="{{ profile.phone or '' }}">
  </div>

  <div class="form-row">
    <label>E-mail (в профиле)</label>
    <input class="input-stick-right" type="email" name="email_field" value="{{ profile.email or '' }}">
  </div>

  <div class="form-row">
    <label>Telegram ID</label>
    <input class="input-stick-right" type="text" name="tg_id" value="{{ profile.tg_id or '' }}">
  </div>

  <div class="form-row">
    <label>Telegram nickname</label>
    <input class="input-stick-right" type="text" name="tg_nickname" value="{{ profile.tg_nickname or '' }}">
  </div>

  <div class="form-row">
    <label>Session (строка)</label>
    <input class="input-stick-right" type="text" name="session_str" value="{{ profile.session or '' }}">
  </div>

  <div class="form-actions">
    <button class="btn btn-primary" type="submit">Сохранить</button>
  </div>
</form>
{% endblock %}
